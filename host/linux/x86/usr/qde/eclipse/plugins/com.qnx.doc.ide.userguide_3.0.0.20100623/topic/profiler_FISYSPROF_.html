
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="copyright" content="(C) Copyright 2005" />
      <meta name="DC.rights.owner" content="(C) Copyright 2005" />
      <meta name="DC.Type" content="concept" />
      <meta name="DC.Title" content="Using Function Instrumentation in the System Profiler" />
      <meta name="abstract" content="" />
      <meta name="description" content="" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROUSECASES_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_USEAPPPROFUNCINST_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_FISAMPLMODE_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_FISINGAPP_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFCreateSessFromIDELnch_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFCreateSessByImpData_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFSingleThreadedApp_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFaRunProcess_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFUsingPostmortemProf_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFPsotMortemProfiling_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFRunningFromTermCmdLine_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROFTakeSnapshot_.html" />
      <meta name="DC.Relation" scheme="URI" content="../topic/profiler_PROCompResults_.html" />
      <meta name="DC.Format" content="XHTML" />
      <meta name="DC.Identifier" content="UsingFunctionInstrumentationintheSystemProfiler" />
      <meta name="DC.Language" content="en-us" />
      <link rel="stylesheet" type="text/css" href="../commonltr.css" />
      <link rel="stylesheet" type="text/css" href="../style.css" />
      <title>Using Function Instrumentation in the System Profiler</title>
   </head>
   <body id="UsingFunctionInstrumentationintheSystemProfiler"><a name="UsingFunctionInstrumentationintheSystemProfiler" shape="rect">
         <!-- --></a>
      
      
      
      <h1 class="topictitle1">Using Function Instrumentation in the System Profiler</h1>
      
      
      
      <div>
         <p></p>
         
         
         <p>By using the data from the Function Instrumentation mode in System Profiler, you can:</p>
         
         <br clear="none" /><ul>
            <li>See the function entry and exit event information, in addition to other types of events in Timeline view </li>
            <li>See a full stack frame of each thread for each timeframe (open the Thread Call Stack view) 
               
               <p>By default, you won't see function names, only addresses; however, you can manually add binary information by doing the following:
                  
               </p>
               <br clear="none" /><ol>
                  <li>In the Project Explorer view, right-click on a <span class="filepath">.kev</span> file, and select <span class="uicontrol">Properties</span>. 
                  </li>
                  <li>Select <span class="uicontrol">Address Translation</span> from the left panel. 
                  </li>
                  <li>On the Binary Locations page, select the path to your binary files. </li>
                  <li>On the Binary Mappings page, type the name of your binary and libraries with the load addresses. </li>
                  <li>Select the option <span class="uicontrol">Enable address translation</span> at the top of the dialog. 
                  </li>
                  <li>You must close and then reopen the <span class="filepath">.kev</span> file for the address translation to take effect. 
                  </li>
               </ol>
               
            </li>
         </ul>
         
         
         <p>
            <span><img src="../images/p2Ftopic2Fprofiler_FISYSPROF_.xml_d149014e64.jpg" alt="System Profiler: Application Profiler data" /></span>
            
         </p>
         
         
         <div class="fignone">
            
            <p>Application Profiler data in the System Profiler timeline.</p>
            
            
         </div>
         
         
         <div class="note"><span class="notetitle">Note:</span> If you're missing function names in the System Profiler Timeline view, you may want to consider adding this information by
            instrumenting your binaries with the Function Instrumentation library, and running in Kernel Events mode. For additional information,
            see <a href="profiler_FISINGAPP_.html" shape="rect">Using Function Instrumentation mode for a single application</a>.
         </div>
         
         
         <p>
            <strong>Launching from the command line on the target machine</strong>
            
         </p>
         
         
         <p>To launch from the command line: </p>
         
         <br clear="none" /><ol>
            <li>Set the environment variable to the following: <pre class="codeblock" xml:space="preserve"><var class="varname">QPROF_KERNEL_TRACE</var>=1 </pre>
               <p>Set this environment variable for each process, or export it for all processes; it won't affect uninstrumented binaries. </p>
               
            </li>
            <li>Launch one or more processes on the target. </li>
            <li>In the IDE, open the System Profiler perspective and run Kernel Logging for several seconds. 
               <div class="note"><span class="notetitle">Note:</span> You can use <tt>tracelogger</tt> to capture events generated by programs compiled with Function Instrumentation.
               </div>
               
            </li>
            <li>Open the resulting <span class="filepath">.kev</span> file in System Profiler editor. 
            </li>
            <li>Optional: You can import the <span class="filepath">.kev</span> file into the Application Profiler perspective from the Profiler Sessions view (<span class="uicontrol">Import Application Profiler Session</span> icon), or by using <span class="menucascade">
                  <span class="uicontrol">File</span>
                  &gt; <span class="uicontrol">Import</span>
                  </span> to open the Import wizard.
            </li>
         </ol>
         
         
         <p>
            <strong>Launching from the IDE</strong>
            
         </p>
         
         
         <p>To profile a process:</p>
         
         <br clear="none" /><ol>
            <li>Create a launch configuration for the binary. </li>
            <li>On <span class="uicontrol">Tools</span> tab, select <span class="uicontrol">Add/Delete Tools</span>, then select <span class="uicontrol">Application Profiler</span>. 
            </li>
            <li>Select <span class="uicontrol">Kernel Logging</span>. 
            </li>
            <li>Click <span class="uicontrol">OK</span>
               
            </li>
            <li>On the <span class="uicontrol">Application Profiler</span> tab, select <span class="uicontrol">Functions Instrumentation</span>. 
            </li>
            <li>For the <span class="uicontrol">Project Scope</span>, select <span class="uicontrol">System Wide</span>. 
            </li>
            <li>Disable the option <span class="uicontrol">Switch to this tool's perspective on launch</span> if it's currently selected. 
            </li>
            <li>Click <span class="uicontrol">Apply</span>. 
            </li>
            <li>Switch to <span class="uicontrol">Kernel Logging</span> tab. 
            </li>
            <li>Select <span class="uicontrol">Launch with Kernel Log capturing</span>. 
            </li>
            <li>Select one of existing System Profiler Kernel Log configurations. If you don't have any, click <span class="uicontrol">Edit</span> and create one. 
            </li>
            <li>Select the option <span class="uicontrol">Switch to this tool's perspective on launch</span>. 
            </li>
            <li>Click <span class="uicontrol">Apply</span>. 
            </li>
            <li>Click the <span class="uicontrol">Upload</span> tab. 
            </li>
            <li>Deselect <span class="uicontrol">Use unique name</span> for the uploaded binary. 
            </li>
            <li>Click <span class="uicontrol">Apply</span>. 
            </li>
            <li>Click <span class="uicontrol">Run</span>.
            </li>
         </ol>
         
         
      </div>
      
      
      <div>
         
         <div class="familylinks">
            
            <div class="parentlink"><strong>Parent topic:</strong> <a href="../topic/profiler_PROUSECASES_.html" shape="rect">Using the Application Profiler</a></div>
            
         </div>
         
         <div class="relinfo"><strong>Related concepts</strong><br clear="none" />
            
            <div><a href="../topic/profiler_USEAPPPROFUNCINST_.html" shape="rect">Using Function Instrumentation with the Application Profiler</a></div>
            
            <div><a href="../topic/profiler_FISAMPLMODE_.html" shape="rect">Using Sampling and Call Count instrumentation mode</a></div>
            
            <div><a href="../topic/profiler_FISINGAPP_.html" shape="rect">Using Function Instrumentation mode for a single application</a></div>
            
            <div><a href="../topic/profiler_PROCompResults_.html" shape="rect">Comparing profiles</a></div>
            
         </div>
         
         <div class="relinfo"><strong>Related tasks</strong><br clear="none" />
            
            <div><a href="../topic/profiler_PROFCreateSessFromIDELnch_.html" shape="rect">Creating an Application Profiler session</a></div>
            
            <div><a href="../topic/profiler_PROFCreateSessByImpData_.html" shape="rect">Creating a profiler session by importing profiler data</a></div>
            
            <div><a href="../topic/profiler_PROFSingleThreadedApp_.html" shape="rect">Profiling a single-threaded application</a></div>
            
            <div><a href="../topic/profiler_PROFaRunProcess_.html" shape="rect">Profiling a running process for an existing project</a></div>
            
            <div><a href="../topic/profiler_PROFUsingPostmortemProf_.html" shape="rect">Using postmortem profiling for Call Count and Sampling</a></div>
            
            <div><a href="../topic/profiler_PROFPsotMortemProfiling_.html" shape="rect">Postmortem profiling</a></div>
            
            <div><a href="../topic/profiler_PROFRunningFromTermCmdLine_.html" shape="rect">Running an instrumented binary with profiling from a command prompt (Function Instrumentation mode)</a></div>
            
            <div><a href="../topic/profiler_PROFTakeSnapshot_.html" shape="rect">Taking a snapshot of a profiling session</a></div>
            
         </div>
         
      </div>
      
      <div id="custom-footer">
         	
         <p class="copyright-notice"><a href="PLUGINS_ROOT/com.qnx.doc.copyright/topic/copyright_overview.html" style="color:black" shape="rect">Copyright</a> | <a href="http://community.qnx.com/sf/sfmain/do/home" style="color:black" shape="rect">Community</a></p>
         
      </div>
      
   </body>
</html>