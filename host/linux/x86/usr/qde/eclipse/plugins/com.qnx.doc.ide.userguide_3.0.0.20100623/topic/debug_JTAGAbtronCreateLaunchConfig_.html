
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="copyright" content="(C) Copyright 2005" />
      <meta name="DC.rights.owner" content="(C) Copyright 2005" />
      <meta name="DC.Type" content="task" />
      <meta name="DC.Title" content="Creating a launch configuration" />
      <meta name="abstract" content="" />
      <meta name="description" content="" />
      <meta name="DC.Relation" scheme="URI" content="../topic/debug_JTAGAbtron_.html" />
      <meta name="DC.Format" content="XHTML" />
      <meta name="DC.Identifier" content="Creatingalaunchconfiguration" />
      <meta name="DC.Language" content="en-us" />
      <link rel="stylesheet" type="text/css" href="../commonltr.css" />
      <link rel="stylesheet" type="text/css" href="../style.css" />
      <title>Creating a launch configuration</title>
   </head>
   <body id="Creatingalaunchconfiguration"><a name="Creatingalaunchconfiguration" shape="rect">
         <!-- --></a>
      
      
      
      <h1 class="topictitle1">Creating a launch configuration</h1>
      
      
      
      <div>
         <p></p>
         
         
         <div class="p">To begin debugging using the Abatron BDI2000 JTAG Debugger, you'll need to create a debug
            configuration in the QNX Momentics IDE to upload an image into the target board's RAM,
            and debug it through the JTAG pins.
            
            
         </div>
         
         
         <div class="section">To create a launch configuration for the Abatron BDI2000 Debugger: </div>
         
         
         <ol>
            <li class="stepexpand">
               <span>In the <span class="filepath">Images</span> directory in the System Builder Projects view,
                  right-click on the <span class="filepath">.elf</span> file and select <span class="menucascade">
                     <span class="uicontrol">Debug As</span>
                     &gt; <span class="uicontrol">Debug Configurationsâ€¦</span>
                     </span>. </span>
               
            </li>
            <li class="stepexpand">
               <span>Create a new instance of the <span class="uicontrol">GDB Hardware Debugging</span> debug
                  configuration. </span>
               
            </li>
            <li class="stepexpand">
               <span>On the <span class="uicontrol">Main</span> tab, specify the name of your project, and select
                  the <span class="filepath">.elf</span> file as the C/C++ Application. You want to select the
                  <span class="filepath">.srec</span> or <span class="filepath">.elf</span> image file that will be
                  uploaded straight to the target board's RAM through the JTAG pins. </span>
               
            </li>
            <li class="stepexpand">
               <span>Click the <span class="uicontrol">Debugger</span> tab.</span>
               
               
               <p>
                  <span><img src="../images/AGAbtronCreateLaunchConfig_.xml_d45847e90.jpg" alt="Launch configuration window - Debug tab" /></span>
                  
               </p>
               
               
               
            </li>
            <li class="stepexpand">
               <span>Change the <span class="uicontrol">GDB Command</span> field to the path of a <tt>gdb</tt>
                  debugger appropriate for your target architecture (e.g.
                  <span class="filepath">ntoppc-gdb.exe</span>). </span>
               
            </li>
            <li class="stepexpand">
               <span>In the <span class="uicontrol">Remote Target</span> area, select the <span class="uicontrol">Use remote
                     target</span> checkbox, ensure that the <span class="uicontrol">JTAG Device</span>
                  combo box is set to <span class="uicontrol">Abatron BDI2000</span>. From this list, you can
                  select which of the supported types of JTAG devices you want to use. </span>
               
            </li>
            <li class="stepexpand">
               <span>Verify that the <span class="uicontrol">Host name or IP address</span> field is the IP
                  address assigned to the BDI2000 Debugger device. Unless otherwise specified on the
                  <span class="uicontrol">Debugger </span> tab, the port number to use is 2001. </span>
               
            </li>
            <li class="stepexpand">
               <span>Click the <span class="uicontrol">Startup</span> tab. </span>
               
               
               <p>
                  <span><img src="../images/AGAbtronCreateLaunchConfig_.xml_d45847e157.jpg" alt="Launch configuration window - Startup tab" /></span>
                  
               </p>
               
               
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Reset and Delay (seconds)</span> checkbox, and type an
                  integer representing the number of seconds to wait between resetting the target
                  board and halting it to send the image. You should allow enough time to bring up all
                  the hardware.</span>
               Since just about every board loaded with a U-Boot, IPL, or a ROM
               Monitor needs to wait a few seconds for the prompt before halting the processor
               to send the image, a delay of 3 seconds is sufficient for waiting between
               resetting the board and starting to load the image. 
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Halt</span> checkbox to stop the target in order to start
                  sending the image. </span>
               
            </li>
            <li class="stepexpand">
               <span>If there are any <tt>monitor</tt> commands you would like to execute before sending
                  the image to the target, type those commands in the <span class="uicontrol">Halt</span>
                  field, separated those commands by newlines, making sure to prefix them with the
                  keyword monitor and a space. You don't need to add commands to restart or halt the
                  board here, as that is done automatically. </span>
               
            </li>
            <li class="stepexpand">
               <span>Check the <span class="uicontrol">Load image</span> checkbox, and browse to the location of
                  the image file (i.e.<span class="filepath">.elf</span>). You want to select the
                  <span class="filepath">.srec</span> or <span class="filepath">.elf</span> image file that will be
                  uploaded straight to the target board's RAM through the JTAG pins. </span>
               
            </li>
            <li class="stepexpand">
               <span>In the <span class="uicontrol">Image Offset (hex)</span> field, type the number previously
                  noted in the Properties view of the System Builder project. </span>
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Load symbols</span> checkbox, and browse to the location
                  of the <span class="uicontrol">Symbols file name</span>
                  <span class="filepath">.sym</span> file in the textbox below. </span>
               
               
               <p>The symbols file provides
                  symbols for source-level debugging. For most BSPs, the symbol file has the same
                  filename as the image file, except for the file extension
                  (<span class="filepath">.sym</span>). Note that the IDE would issue a warning message
                  if you didn't build the image with debug symbols. Leaving this textbox blank
                  would result in no debug symbols being loaded, resulting in assembly-level
                  debugging only. 
               </p>
               
               
               <p>Each of these two textboxes (the <span class="uicontrol">Symbols file
                     name</span> and the <span class="uicontrol">Symbols offset (hex)</span>)is
                  paired with a <span class="uicontrol">Symbol offset</span> field. In the case of
                  <span class="filepath">.elf</span> files, the offset for the image can be parsed from
                  the binary itself; you'll need to manually specify the offset by looking at the
                  BSP-provided value. 
               </p>
               
               
               
            </li>
            <li class="stepexpand">
               <span>In the <span class="uicontrol">Symbol offset (hex)</span> field, type the value in the first
                  column in the console output, noted earlier. </span>
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Set program counter at (hex)</span> checkbox and type the
                  value in the third column of the console output noted earlier. </span>
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Set breakpoint at</span> checkbox and type the name of
                  the function you want to set the initial break point, for example
                  <cite>_main</cite>. </span>
               
            </li>
            <li class="stepexpand">
               <span>Select the <span class="uicontrol">Resume</span> checkbox. </span>
               
            </li>
            <li class="stepexpand">
               <span>In the <span class="uicontrol">Run Commands</span> field, type any GDB commands that you
                  would like to have automatically executed after the image and symbols have been
                  successfully uploaded to the target. For example, you can type the <tt>si</tt>
                  command at the end of this box in order to start stepping. </span>
               
            </li>
            <li class="stepexpand">
               <span>Click <span class="uicontrol">Apply</span>. </span>
               
            </li>
            <li class="stepexpand">
               <span>Click <span class="uicontrol">Debug</span> and begin debugging.</span>
               
            </li>
         </ol>
         
         
      </div>
      
      
      <div>
         
         <div class="familylinks">
            
            <div class="parentlink"><strong>Parent topic:</strong> <a href="../topic/debug_JTAGAbtron_.html" shape="rect">JTAG: Using the Abatron BDI2000 JTAG Debugger with a QNX Neutrino kernel image</a></div>
            
         </div>
         
      </div>
      
      <div id="custom-footer">
         	
         <p class="copyright-notice"><a href="PLUGINS_ROOT/com.qnx.doc.copyright/topic/copyright_overview.html" style="color:black" shape="rect">Copyright</a> | <a href="http://community.qnx.com/sf/sfmain/do/home" style="color:black" shape="rect">Community</a></p>
         
      </div>
      
   </body>
</html>